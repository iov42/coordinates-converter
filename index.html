<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.10.0/proj4.min.js"></script>
    <title>CSV Coordinate Converter</title>
  </head>
  <body>
    <div class="row">
      <div class="col"><h1>Coordinate Converter</h1></div>
    </div>
    <div class="row">
      <div class="col">
        <div class="row">
          <div class="col">
            <h3>Enter coordinates</h3>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <form>
              <div class="form-group">
                <label for="coordinateFormatSelector">Coordinate format</label>
                <select
                  class="form-control"
                  id="coordinateFormatSelector"
                  onchange="changeCoordinateFormatMode()"
                ></select>
              </div>
              <div class="form-group">
                <!-- <label for="exampleFormControlSelect1">Coordinate format</label> -->
                <div class="custom-control custom-radio custom-control-inline">
                  <input
                    type="radio"
                    id="customRadioInline1"
                    name="customRadioInline1"
                    class="custom-control-input"
                    checked
                  />
                  <label class="custom-control-label" for="customRadioInline1"
                    >Manual</label
                  >
                </div>
                <!-- <div class="custom-control custom-radio custom-control-inline">
                  <input
                    type="radio"
                    id="customRadioInline2"
                    name="customRadioInline1"
                    class="custom-control-input"
                  />
                  <label class="custom-control-label" for="customRadioInline2"
                    >Upload file</label
                  >
                </div> -->
              </div>
            </form>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p id="coordinateInputHelperText"></p>
          </div>
        </div>
        <div class="row">
          <div class="col form-group">
            <form>
              <div class="row">
                <div
                  class="col-2 coordinateInput"
                  style="display: none"
                  id="utmTimezone"
                >
                  <input
                    type="text"
                    class="form-control"
                    placeholder="UTM"
                    id="utmTimezoneField"
                  />
                </div>
                <div
                  class="col-2 coordinateInput"
                  style="display: none"
                  id="utmHemisphere"
                >
                  <select class="form-control" id="utmHemisphereSelector">
                    <option>N</option>
                    <option>S</option>
                  </select>
                </div>
                <div class="col coordinateInput">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Longitude"
                    id="coordinateXField"
                  />
                </div>
                <div class="col coordinateInput">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Latitude"
                    id="coordinateYField"
                  />
                </div>
                <div class="col-2">
                  <button
                    type="button"
                    class="btn btn-primary"
                    onclick="addCoordinates()"
                  >
                    Add
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="row" id="coordinateInputError" style="visibility: hidden">
          <div class="col">
            <p id="coordinateInputErrorText" style="color: red"></p>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <textarea
              class="form-control coordinatesTextField"
              aria-label="With textarea"
              id="coordinateTextField"
            ></textarea>
          </div>
        </div>
        <div class="row" style="margin-top: 16px">
          <div class="col">
            <button
              type="button"
              class="btn btn-primary"
              onclick="convertInsertedCoordinatesToGeoJson()"
            >
              Convert to GeoJSON
            </button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <div class="col" style="padding: 0px">
            <h3>Geo JSON</h3>
          </div>
          <div class="col">
            <div class="row">
              <button
                type="button"
                class="btn btn-primary"
                onclick="onDownload()"
                id="downloadGeoJson"
                style="visibility: hidden"
              >
                Download .json
              </button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col"><p id="geoJsonCoordinates"></p></div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <h3>Map</h3>
        </div>
        <div class="row">
          <div id="map" style="width: 450px; height: 450px"></div>
        </div>
        <div class="row">
          <div class="col" style="padding: 0">
            <table class="table">
              <tbody>
                <tr>
                  <td>Square kilometers</td>
                  <td id="squareKilometersArea">???</td>
                </tr>
                <tr>
                  <td>Hectares</td>
                  <td id="hectaresArea">???</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="js/utils/calcArea.js"></script>
  <script src="js/ui/elements.js"></script>
  <script src="js/general/values.js"></script>
  <script src="js/general/memory.js"></script>
  <script src="js/ui/dropdown.js"></script>
  <script src="js/ui/coordinateInput.js"></script>
  <script src="js/converters/dmsToDd.js"></script>
  <script src="js/converters/utmToDD.js"></script>
  <script>
    window.onload = function () {
      addOptionsToCoordinateFormatDropdown();
      setHelperTextValue(decimalDegrees);
    };
  </script>
  <script>
    var map = L.map("map").setView([51.505, -0.09], 13); // Centered at latitude 51.505 and longitude -0.09 with zoom level 13

    standardMapLayer.addTo(map);

    map.on("contextmenu", function (event) {
      console.log("Right-clicked at:", event.latlng);
      // You can perform any action here, such as adding a marker or displaying a context menu
    });
  </script>
</html>
